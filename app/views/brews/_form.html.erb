<%= form_with model: @brew do |form| %>
  <% if brew.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(brew.errors.count, "error") %> prohibited this brew from being saved:</h2>

      <ul>
        <% brew.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="multi-field row">
    <div class="field">
      <%= form.number_field :coffee_weight, class: 'form-input', placeholder: 'Coffee Weight', value: (@last_brew ? @last_brew.coffee_weight : @brew.coffee_weight) %>
      <%= form.label :coffee_weight, class: 'form-label' %>
    </div>

    <div class="field">
      <%= form.number_field :water_weight, class: 'form-input', placeholder: 'Water Weight', value: (@last_brew ? @last_brew.water_weight : @brew.water_weight) %>
      <%= form.label :water_weight, class: 'form-label' %>
    </div>
    <div class="ratio">
<!--      TODO: Create a stimulus controller which automatically puts the ratio here.-->
    </div>
  </div>

  <div class="time field">
    <%= form.text_field :time, class: 'form-input', data: { target: "stopwatch.brewTime" }, placeholder: 'Time' %>
    <%= form.label :time, class: 'form-label' %>
  </div>

  <div class="multi-field row">
    <div class="field">
      <%= form.text_field :equipment, class: 'form-input', placeholder: 'Equipment', value: (@last_brew ? @last_brew.equipment : @brew.equipment) %>
      <%= form.label :equipment, class: 'form-label' %>
    </div>

    <div class="field">
      <%= form.text_field :method, class: 'form-input', placeholder: 'Method', value: (@last_brew ? @last_brew.method : @brew.method)%>
      <%= form.label :method, class: 'form-label' %>
    </div>
  </div>

  <div class="multi-field row">
    <div class="field">
      <%= form.text_field :grinder, class: 'form-input', placeholder: 'Grinder', value: (@last_brew ? @last_brew.grinder : @brew.grinder) %>
      <%= form.label :grinder, class: 'form-label' %>
    </div>

    <div class="field">
      <%= form.text_field :grinder_setting, class: 'form-input', placeholder: 'Grinder Setting', value: (@last_brew ? @last_brew.grinder_setting : @brew.grinder_setting) %>
      <%= form.label :grinder_setting, class: 'form-label' %>
    </div>
  </div>

  <div class="field">
    <%= form.text_area :notes, class: 'form-input', placeholder: 'Notes' %>
    <%= form.label :notes, class: 'form-label' %>
  </div>

  <div class="field">
    <%= form.number_field :rating, class: 'form-input', placeholder: 'Rating' %>
    <%= form.label :rating, class: 'form-label' %>
  </div>

  <div class="action">
    <%= form.submit 'Log Brew', class: 'form-submit btn btn-primary' %>
  </div>
<% end %>
